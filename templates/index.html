<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¶–µ–Ω—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ */
        body { 
            margin: 0; 
            padding: 20px; 
            background: #f0f0f0; 
            font-family: Arial, sans-serif;
        }
        .container { 
            background: white; 
            padding: 30px; 
            border-radius: 10px; 
            max-width: 1200px; 
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–¶–µ–Ω—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑</h1>
        
        <!-- –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ -->
        <div class="section">
            <h2>1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤</h2>
            
            <div class="upload-blocks-container">
                <!-- –ë–ª–æ–∫ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ñ–ö -->
                <div class="upload-block">
                    <label for="main_files" class="upload-block-label">–û—Å–Ω–æ–≤–Ω–æ–π –ñ–ö</label>
                    <div class="upload-area" id="main_upload_area">
                        <input type="file" id="main_files" accept=".csv" multiple>
                        <div class="upload-placeholder">
                            <span class="upload-icon">üìÅ</span>
                            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞<br>–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                        </div>
                    </div>
                    <div class="files-preview" id="main_files_preview"></div>
                </div>
                
                <!-- –ë–ª–æ–∫ –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ -->
                <div class="upload-block">
                    <label for="competitor_files" class="upload-block-label">–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã</label>
                    <div class="upload-area" id="competitor_upload_area">
                        <input type="file" id="competitor_files" accept=".csv" multiple>
                        <div class="upload-placeholder">
                            <span class="upload-icon">üìÅ</span>
                            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞<br>–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                        </div>
                    </div>
                    <div class="files-preview" id="competitor_files_preview"></div>
                </div>
            </div>
            
            <button id="createGroupsBtn" class="btn btn-primary">–ê–Ω–∞–ª–∏–∑</button>
        </div>
        
        <!-- –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø -->
        <div class="section" id="groupsSection" style="display: none;">
            <h2>2. –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞</h2>
            <div class="grouping-toggle-container" style="margin-bottom: 20px;">
                <label class="grouping-toggle-label">–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:</label>
                <div class="grouping-toggle">
                    <input type="radio" id="groupByCharacteristics" name="grouping" value="characteristics" checked>
                    <label for="groupByCharacteristics">–°–≤–æ–¥–Ω–∞—è</label>
                    <input type="radio" id="groupByType" name="grouping" value="type">
                    <label for="groupByType">–ü–æ —Ç–∏–ø–∞–º –ø–æ–º–µ—â–µ–Ω–∏–π</label>
                    <input type="radio" id="groupByVisualization" name="grouping" value="visualization">
                    <label for="groupByVisualization">–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</label>
                    <input type="radio" id="groupByObject" name="grouping" value="object">
                    <label for="groupByObject">–ü–æ –ñ–ö</label>
                </div>
            </div>
            <div id="groupsList"></div>
        </div>
        
        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è -->
        <div class="section" id="comparisonSection" style="display: none;">
            <h2>3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h2>
            <div id="comparisonsList"></div>
        </div>
        
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>
        
        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö -->
        <div id="errorMessage" class="error-message" style="display: none;"></div>
    </div>
    
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω');
            const container = document.querySelector('.container');
            if (container) {
                console.log('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–π–¥–µ–Ω');
                container.style.display = 'block';
                container.style.visibility = 'visible';
            } else {
                console.error('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω!');
            }
        });
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞
        window.addEventListener('load', function() {
            console.log('–í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
            if (typeof groupsData === 'undefined') {
                console.error('JavaScript –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!');
            } else {
                console.log('JavaScript –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ');
            }
        });
    </script>
</body>
</html>

